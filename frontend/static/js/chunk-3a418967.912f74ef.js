(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a418967","chunk-306eddde"],{"0374":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",{class:e.itemClass,style:{paddingLeft:(e.options.form||{}).labelWidth||"125px"},attrs:{span:24}},[n("span",{staticClass:"el-icon-info"}),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.infoHtml)}})])},o=[],a={props:{options:{type:Object,default:function(e){}},infoHtml:{type:String,default:""}},computed:{itemClass:function(){var e=["formItem-tip",(this.options.form||{}).size||""];return e.join(" ")}}},r=a,s=(n("7792"),n("2877")),l=Object(s["a"])(r,i,o,!1,null,"eef4f1a4",null);t["default"]=l.exports},"03fb":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.key,class:e.loading?"loading":""},[e.loading?e._e():n("div",[n("v-form",{key:e.key,attrs:{rules:e.rule,"data-version-enable":e.versionEnable,"data-versions":e.versions,"compute-when":e.computeWhen,"save-api":"/dev/make","router-back":!1},on:{change:e.onChange}})],1)])},o=[],a=(n("ac6a"),n("a026")),r=n("1411"),s=n("b775"),l=n("ed08"),c=n("1a2c");a["default"].component("v-jsoneditor",c["default"]);var u={components:{VForm:r["default"]},data:function(){return{isStep:!1,rule:[],loading:!0,versionEnable:!1,versions:[],stepType:"card",computeWhen:{resource:{},computeMap:{}}}},computed:{key:function(){return this.formRule(),this.$route.query._ver||""}},created:function(){},methods:{formRule:function(){var e=this;Object(s["a"])({url:"/dev/controllermaker",method:"get",params:this.$route.query}).then((function(t){e.rule=t.payload.form,e.rule.forEach((function(t){void 0!==t.section&&(e.isStep=!0)})),e.versionEnable=t.payload.version_enable,e.versions=t.payload.version_list,e.stepType=t.payload.step_type||"card",e.loading=!1,e.computeWhen.computeMap=t.payload.compute_map}))},onChange:function(e,t,n){if(console.log("marker",e,t,n),"pool"===t){var i=Object(l["i"])(e.getRule("database").props.selectApi,e.formData());Object(s["a"])({url:i}).then((function(t){console.log("maker",t),e.updateRule("database",{options:t.payload,props:{remote:!1}})}))}if("database"===t){var o=Object(l["i"])(e.getRule("table").props.selectApi,e.formData());Object(s["a"])({url:o}).then((function(t){console.log("maker",t),e.updateRule("table",{options:t.payload,props:{remote:!1}})}))}if("table"===t){var a=Object(l["i"])("/dev/tableSchema?pool={pool}&db={database}&table={table}",e.formData());Object(s["a"])({url:a}).then((function(t){console.log("maker schema",t),e.updateRule("form",{value:t.payload})}))}}}},p=u,d=(n("829e"),n("2877")),f=Object(d["a"])(p,i,o,!1,null,"f78f9624",null);t["default"]=f.exports},"0c08":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select oms-select2",class:{opening:e.visible,size:e.selectSize,disabled:e.disabled}},[n("div",{ref:"content",staticClass:"select2-content",on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[0===e.selected.length?n("div",{staticClass:"placeholder"},[e._v(e._s(e.placeholder))]):e._e(),e._v(" "),n("span",{staticClass:"select2-icon"},[n("i",{staticClass:"el-icon-arrow-down",class:{opening:e.visible}})]),e._v(" "),n("div",{staticClass:"tags"},[e.collapseTags&&e.selected.length?[n("el-tag",{attrs:{closable:!e.disabled,size:"mini",type:"info","disable-transitions":""},on:{close:function(t){return e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].label||e.selected[0].value))])]),e._v(" "),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:"mini",type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()]:e._l(e.selected,(function(t){return n("el-tag",{key:t.value,attrs:{closable:!e.disabled,size:"mini",type:"info","disable-transitions":""},on:{close:function(n){return e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.label||t.value))])])}))],2)]),e._v(" "),n("transition",{attrs:{name:"el-zoom-in-top"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"popper",staticClass:"el-select-dropdown el-popper is-multiple",style:{top:e.inputHeight+"px",width:e.dropdownWidth+"px"},attrs:{"x-placement":"bottom-start"}},[n("div",{staticClass:"search-box"},[n("el-input",{ref:"select2-query",attrs:{clearable:"",size:"mini",placeholder:"请输入关键词"},on:{input:e.queryChange},nativeOn:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev"))}]},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),e._v(" "),n("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"scrollbar",attrs:{"element-loading-spinner":"el-icon-loading",tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("li",{ref:"optionItem_-1",class:e.getItemClass({label:e.query,value:e.query},-1),attrs:{created:""},on:{click:function(t){return e.onClickOption({label:e.query,value:e.query},-1)},mouseenter:function(t){return e.hoverItem(-1)}}},[e._v(e._s(e.query))]):e._e(),e._v(" "),e.option.length>0?e._l(e.option,(function(t,i){return n("li",{key:t.value,ref:"optionItem_"+i,refInFor:!0,class:e.getItemClass(t,i),on:{click:function(n){return e.onClickOption(t,i)},mouseenter:function(t){return e.hoverItem(i)}}},[e._v("\n            "+e._s(t.label)+"\n          ")])})):e._e(),e._v(" "),e.allowCreate||0!==e.option.length?e._e():n("div",{staticClass:"select2-dropdown__empty"},[e._v(e._s(e.emptyText))])],2),e._v(" "),n("div",{staticClass:"select-option-popper__arrow"})],1)])],1)},o=[],a=(n("20d6"),n("75fc")),r=(n("7514"),n("ac6a"),n("c5f6"),n("9169")),s=n("b775"),l=n("ed08"),c=n("2ef0"),u=n.n(c),p=n("a215"),d=n("106f"),f={directives:{Clickoutside:r["a"]},mixins:[p["a"]],props:{value:{type:[String,Number,Array],default:""},placeholder:{type:String,default:"请选择"},options:{type:Array,default:function(e){return[]}},remote:{type:Boolean,default:!1},selectApi:{type:String,default:""},collapseTags:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multipleLimit:{type:Number,default:1e3},allowCreate:{type:Boolean,default:!1},defaultFirstOption:{type:Boolean,default:!1}},data:function(){return{originList:[],option:[],selectSize:"mini",visible:!1,query:"",selected:[],inputHeight:31,dropdownWidth:500,emptyText:"没有找到数据",loading:!1,hoverIndex:-1}},computed:{iconClass:function(){return this.visible?"arrow-up is-reverse":"arrow-up"},showNewOption:function(){var e=this,t=this.option,n=t.some((function(t){return t.label===e.query}));return this.allowCreate&&""!==this.query&&!n}},watch:{value:{handler:function(e){var t=this;if(Array.isArray(e)){var n=[];e.forEach((function(e){var i=[].concat(Object(a["a"])(t.options),Object(a["a"])(t.selected)).find((function(t){return t.value===e}));i?n.push({value:e,label:i.label}):t.allowCreate&&n.push({value:e,label:e})})),this.selected=n}this.dispatch("ElFormItem","el.form.change",e)},immediate:!0}},inject:{elForm:{default:""},elFormItem:{default:""}},created:function(){this.option=this.options,this.originList=this.options,this.defaultFirstOption&&(this.hoverIndex=0)},mounted:function(){},methods:{updateValue:function(){var e=this.selected.map((function(e){return e.value}));this.$emit("input",e),this.$emit("change",e)},toggleMenu:function(){this.disabled||(this.visible=!this.visible,this.visible&&this.handleOpen())},handleClose:function(){this.visible=!1},handleOpen:function(){var e=this;this.$nextTick((function(){e.$refs["select2-query"].focus(),e.dropdownWidth=e.$refs.content.offsetWidth}))},onClickOption:function(e){if(this.selected.length>this.multipleLimit-1)return this.$message.warning("最多只能选择".concat(this.multipleLimit,"个")),!1;var t=this.selected.findIndex((function(t){return t.value===e.value}));-1!==t?(this.selected.splice(t,1),this.selected=this.selected):(this.selected.push(e),this.selected=this.selected),this.updateValue(),this.setCss()},setCss:function(){var e=this;this.$nextTick((function(){e.$refs.content&&(e.inputHeight=e.$refs.content.offsetHeight,e.$refs["select2-query"].focus())}))},getItemClass:function(e,t){var n=this.selected;return["el-select-dropdown__item",{selected:n.some((function(t){return t.value===e.value}))},{hover:this.hoverIndex===t}]},queryChange:u.a.debounce((function(e){this.loadOptions(),this.setHoverIndex()}),300),loadOptions:function(){this.remote?this.loadOptionsFromRemote():this.loadOptionsFromLocal()},loadOptionsFromLocal:function(){var e=this;this.query?this.option=this.originList.filter((function(t){return t.label.indexOf(e.query)>=0})):this.option=this.originList},loadOptionsFromRemote:function(){var e=this;if(""===this.query)return this.option=[],!1;if(this.selectApi){this.loading=!0;var t=this.selectApi;this.elForm&&(t=Object(l["i"])(this.selectApi,this.elForm.model)),Object(s["a"])({url:t,method:"get",params:{kw:this.query}}).then((function(t){e.loading=!1;var n="{}"===JSON.stringify(t.payload)?[]:t.payload;e.option=n}),(function(t){e.loading=!1}))}},deleteTag:function(e,t){this.selected=this.selected.filter((function(e){return e.value!==t.value})),e.stopPropagation(),this.updateValue(),this.setCss()},selectOption:function(){this.hoverIndex>-1?this.onClickOption(this.option[this.hoverIndex]):this.onClickOption({label:this.query,value:this.query})},setHoverIndex:function(){this.defaultFirstOption?this.hoverIndex=this.showNewOption?-1:0:this.hoverIndex=this.showNewOption?-2:-1},hoverItem:function(e){this.hoverIndex=e},navigateOptions:function(e){"next"===e?this.hoverIndex===this.option.length-1?this.hoverIndex=this.showNewOption?-1:0:this.hoverIndex++:"prev"===e&&(this.hoverIndex--,this.hoverIndex===(this.showNewOption?-2:-1)&&(this.hoverIndex=this.option.length-1)),this.scrollToOption()},scrollToOption:function(){var e=this.$refs["optionItem_".concat(this.hoverIndex)][0];if(this.$refs.popper&&e){var t=this.$refs.popper.querySelector(".el-select-dropdown__wrap");Object(d["a"])(t,e)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()}}},h=f,m=(n("a54e"),n("b6e7"),n("2877")),g=Object(m["a"])(h,i,o,!1,null,"59511a04",null);t["default"]=g.exports},1411:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],class:e.formClass},[n("Version",{attrs:{rule:e.rule,show:e.versionEnable&&e.versions.length>0,versions:e.versions},on:{change:e.changeVersion},model:{value:e.versionId,callback:function(t){e.versionId=t},expression:"versionId"}},[n("form-create",{key:e.key,ref:"form",attrs:{rule:e.rule,option:Object.assign({},e.formOptions,{submitBtn:!1,resetBtn:!1})},on:{"on-reload":e.onFormReload,mounted:function(t){return e.onFormMounted(t)}},model:{value:e.fApi,callback:function(t){e.fApi=t},expression:"fApi"}}),e._v(" "),n("el-row",{style:{paddingLeft:e.formOptions.form.labelWidth||"125px"}},[n("el-button",e._b({directives:[{name:"show",rawName:"v-show",value:e.formOptions.submitBtn&&e.formOptions.submitBtn.show,expression:"formOptions.submitBtn && formOptions.submitBtn.show"}],staticStyle:{width:"100px"},attrs:{loading:e.submitLoading},on:{click:function(t){e.onSubmit(e.fApi.formData())}}},"el-button",e.formOptions.submitBtn,!1),[e._v(e._s(e.formOptions.submitBtn.innerText||"提交"))]),e._v(" "),n("el-button",e._b({directives:[{name:"show",rawName:"v-show",value:e.formOptions.resetBtn&&e.formOptions.resetBtn.show,expression:"formOptions.resetBtn && formOptions.resetBtn.show"}],staticStyle:{width:"100px"},on:{click:function(t){return e.$router.back(-1)}}},"el-button",e.formOptions.resetBtn,!1),[e._v(e._s(e.formOptions.resetBtn.innerText))])],1)],1)],1)},o=[],a=(n("8e6e"),n("75fc")),r=n("7618"),s=(n("456d"),n("a481"),n("28a5"),n("ac6a"),n("bd86")),l=(n("c5f6"),n("b91a")),c=n("b775"),u=n("71a8"),p=n("ed08"),d=n("5c96"),f=n("a243"),h=n("2ef0"),m=n.n(h);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={name:"VForm",components:{Version:f["default"],formCreate:l["a"].$form()},props:{value:{type:Object,default:function(){return{}}},rules:{type:Array,default:function(){return[]}},ruleApi:{type:String,default:function(){return this.$route.path}},saveApi:{type:String,default:function(){return this.$route.path}},afterSubmit:{type:Function,default:function(){}},routerBack:{type:Boolean,default:!0},pKey:{type:String||Number,default:""},dataVersionEnable:{type:Boolean,default:!1},dataVersions:{type:Array,default:function(){return[]}},computeMap:{type:Object,default:function(e){}},option:{type:Object,default:function(e){}}},data:function(){var e={injectEvent:!0,form:{},submitBtn:{type:"primary",show:!0,icon:"",size:"small"},resetBtn:{show:!0,icon:"",innerText:"取消",size:"small"}};return{versionId:"",forceUpdateVal:!1,formOptions:e,fApi:{},model:{},rule:[],originRule:{},key:this.$props.pKey,versionEnable:!1,versions:[],loading:!0,submitLoading:!1,realComputeMap:this.$props.computeMap||{},computeMapResource:{}}},computed:{formClass:function(){var e=["vform-content",this.loading?"form-loading":"",(this.formOptions.form||{}).size||""];return e.join(" ")}},created:function(){this.init(),this.formRule()},methods:{init:function(){this.formOptions=this._.merge(this.formOptions,this.option)},cloneRule:function(e){return this._.cloneDeep(e)},formRule:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$props.rules.length>0&&!t)return this.formMaker(this.$props.rules),this.versionEnable=this.$props.dataVersionEnable,this.versions=this.$props.dataVersions,void(this.loading=!1);var n=v(v({},this.$route.query),this.versionId?{_ver:this.versionId}:{});this.loading=!0,Object(c["a"])({url:this.$props.ruleApi,method:"get",params:n}).then((function(t){var n=t.payload.form;e.versionEnable=t.payload.version_enable,e.versions=t.payload.version_list,e.rule=[],e.formMaker(n),e.loading=!1,e.realComputeMap=t.payload.compute_map,e.formOptions=e._.merge(e.formOptions,t.payload.form_ui||{})})).catch((function(){e.loading=!1}))},formMaker:function(e){var t=this;e.forEach((function(e){var n=Object(u["a"])(e);n.on=v(v({},n.on),{},{change:function(n,i,o){return t.onChange(e.field,i,e,o)}}),"select"===e.type&&!0===e.props.remote&&(n.props.remoteMethod=t._.debounce((function(e,n){return t.selectRemote(e.self.field,n,e.self)}),200)),t.$route.query[e.field]&&(n.value=t.parseType(e,t.$route.query[e.field]),console.log("VForm formMarker",n,t.$route.query[e.field])),t.rule.push(n),e.info&&!(t.formOptions.form||{}).inline&&(e.className=(e.className||"")+"hasInfo",t.rule.push({type:"form-item-info",native:!0,props:{infoHtml:e.info,options:t.formOptions}}),delete e.info)}))},parseType:function(e,t){var n=e.value;return"object"===Object(p["k"])(n)?n:(e.options&&(n=e.options[e.options.length-1].value),"string"===Object(p["k"])(n)&&"object"!==Object(p["k"])(n)?t+"":"number"===Object(p["k"])(n)?"array"===Object(p["k"])(t)?(console.log(t,e),t.map((function(e){return(e+"").indexOf(".")>-1?parseFloat(e):parseInt(e)}))):(t+"").indexOf(".")>-1?parseFloat(t):parseInt(t):t)},onCancel:function(){this.$router.back(-1)},onSubmit:m.a.throttle((function(e){var t=this,n=this.validate(this.fApi);if(console.log("validRet",n),console.warn("formData",JSON.stringify(e)),n){var i={};for(var o in e)i[o.split("-").join(".")]=e[o];this.submitLoading=!0,Object(c["a"])({url:this.$props.saveApi,method:"post",data:i}).then((function(e){t.submitLoading=!1,Object(d["Message"])({message:(e.message||"操作成功").replace(/\n/g,"<br/>"),type:"success",duration:5e3,dangerouslyUseHTMLString:!0}),t.$props.afterSubmit(e),history.length>1?t.routerBack&&setTimeout((function(){t.$router.back(-1)}),500):setTimeout((function(){window.close()}),500)})).catch((function(e){return t.submitLoading=!1}))}}),1e3,{trailing:!1}),validate:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.fApi,t=!0,n=0;n<e.fields().length;n++)e.hiddenStatus(e.fields()[n])||e.validateField(e.fields()[n],(function(e){t=t&&!e}));return t?e.formData():(Object(p["h"])("is-error"),!1)},onFormReload:function(){var e=this;console.log("onFormReload"),Object.keys(this.realComputeMap).forEach((function(t){return e.formCompute(e.safeField(t))})),this.onFormChange()},onChange:function(e,t,n,i){console.log("onChange",e,t),this.formCompute(e),this.onFormChange(e,t)},formCompute:function(e){var t=this,n=this.realField(e);if(void 0!==this.realComputeMap[n]){var i=this.fApi.formData();this.computeMapResource=this.computeMapResource||{},Object.keys(this.realComputeMap[n]).forEach((function(o){var a=t.safeField(o);void 0===t.computeMapResource[a]&&(t.computeMapResource[a]=Object.assign({},t.fApi.getRule(a)));var r=t.computeMapResource[a],s={},l=t.realComputeMap[n][o];if(l.forEach((function(e){var t=Object(p["l"])(i,e.when,!0),n={};Object.keys(e.set).forEach((function(i){"type"===i&&(n["hidden"]=t),t&&(n[i]=e.set[i])})),Object.keys(n).length>0&&(s=Object.assign(s,n))})),console.log("VForm sets",s),void 0===s.options&&void 0!==r.options&&r.options.length>0&&(s.options=r.options),0!==Object.keys(s).length){t.fApi.updateRule(a,Object.assign({},s,{value:void 0}),!0);var c=["select","checkbox","cashcard"],u=s.options&&c.indexOf(r.type)>0?t._.intersection(r.value,Object(p["a"])(s.options,"value",(function(e){return void 0===e.disabled||!1===e.disabled}))):void 0!==s.value?s.value:r.value;t.fApi.setValue(a,u),void 0!==s.hidden&&t.fApi.hidden(!!t.fApi.hiddenStatus(e)||s.hidden,a),console.log("VFrom",a,s),t.formCompute(a),t.fApi.clearValidateState(a),t.forceUpdateVal&&void 0!==t.originRule[a.split("-").join(".")]&&t.fApi.setValue(a,t.originRule[a.split("-").join(".")].value)}}))}},selectRemote:function(e,t,n){var i=this,o="object"===Object(r["a"])(t)?t.join(","):t;""!==o&&Object(c["a"])({url:Object(p["i"])(this.fApi.model()[e].props.selectApi,this.fApi.formData()),method:"get",params:{kw:o}}).then((function(t){var n="{}"===JSON.stringify(t.payload)?[]:t.payload,o=i.fApi.getRule(e);if(o.props.multiple){var r=o.options.filter((function(e){return o.value.indexOf(e.value)>-1})),s=(n||[]).filter((function(e){return-1===o.value.indexOf(e.value)}));o.options=[].concat(Object(a["a"])(r),Object(a["a"])(s))}else o.options=n}))},changeVersion:function(e){this.forceUpdateVal=!0,this.formRule(!0)},onFormMounted:function(e){var t=this;Object.keys(this.realComputeMap).forEach((function(e){return t.formCompute(t.safeField(e))})),this.onFormChange(),this.$emit("mounted",e)},onFormChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.$emit("input",this.fApi),this.$emit("change",this.fApi,e,t)},safeField:function(e){return e.replace(".","-")},realField:function(e){return e.replace("-",".")},parentUpdateRuleHook:function(e,t){this.rule=[],console.log("xxxxxxxxxxxx",e,t),this.formMaker(e),this.realComputeMap=t,this.forceUpdateVal=!0}}},y=b,_=(n("8deb"),n("2877")),w=Object(_["a"])(y,i,o,!1,null,"55539ca2",null);t["default"]=w.exports},"1a2c":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"jsoneditor-container",class:{"max-box":e.max,"min-box":!e.max},style:e.getHeight},[n("div",{ref:"jsoneditor",staticClass:"jsoneditor-box"}),e._v(" "),"code"===e.options.mode&&e.plus?n("el-button",{staticClass:"max-btn",attrs:{type:"button",size:"mini"},on:{click:function(t){e.max=!e.max}}}):e._e()],1)},o=[],a=(n("c5f6"),n("61f0")),r=n.n(a),s=(n("6014"),{name:"VJson",provide:function(){return{VJson:this}},inject:["elForm","elFormItem"],props:{options:{type:Object,default:function(){return{mode:"code"}}},field:{type:String,default:""},value:{type:[Object,Array,Number,String,Boolean],default:""},height:{type:String,default:""},plus:{type:Boolean,default:!0}},data:function(){return{editor:null,style:{},max:!1,internalChange:!1}},computed:{getHeight:function(){return this.height&&!this.max?{height:this.height}:{}}},watch:{value:function(e){this.editor&&e&&!this.internalChange&&this.editor.set(e)},max:function(e){var t=this;this.$nextTick((function(){t.initView()}))}},mounted:function(){this.initView()},beforeDestroy:function(){this.destroyView()},methods:{onChange:function(){var e=this,t="";try{t=this.editor.get(),"{}"===JSON.stringify(t)&&(t="")}catch(n){this.onError(n)}this.editor&&(this.internalChange=!0,this.$emit("input",t),this.$emit("change",t),this.$nextTick((function(){e.internalChange=!1})))},onError:function(e){this.$emit("error",e),e.length>0?(this.elFormItem.validateMessage=e[0].message,this.elFormItem.validateState=e[0].type):(this.elFormItem.validateMessage="",this.elFormItem.validateState="")},validate:function(e,t,n){var i=this.editor.lastSchemaErrors;console.warn(i),i.length>0?n(i[0].message):n()},initView:function(){var e=this;if(!this.editor){var t=this.$refs.jsoneditor,n=Object.assign({onChange:this.onChange,onValidationError:this.onError,navigationBar:!1,statusBar:!1},this.options);this.editor=new r.a(t,n),this.elFormItem.rules.push({validator:function(t,n,i){return e.validate(t,n,i)}})}this.editor.set(this.value||{})},destroyView:function(){this.editor&&(this.editor.destroy(),this.editor=null)}}}),l=s,c=(n("cdce"),n("2877")),u=Object(c["a"])(l,i,o,!1,null,"49e17a71",null);t["default"]=u.exports},2574:function(e,t,n){},"29b8":function(e,t,n){"use strict";n("64ab")},"29de":function(e,t,n){},"2b83":function(e,t,n){},"2fa1":function(e,t,n){},3097:function(e,t,n){"use strict";n("2fa1")},3257:function(e,t,n){"use strict";n.r(t);var i=n("7618"),o=(n("c5f6"),n("a026")),a=n("b775"),r=n("ed08"),s='\n    <div class="el-select">\n        <el-select\n                v-model="selected"\n                :key="key"\n                style="width: 100%;"\n                :multiple="multiple"\n                :multiple-limit="multipleLimit"\n                filterable="filterable"\n                clearable\n                remote\n                reserve-keyword\n                :size="size"\n                :placeholder="placeholder"\n                :remote-method="remoteMethod"\n                :allow-create="allowCreate"\n                @change="onChange"\n                :loading="loading"\n                :no-data-text="noDataText">\n            <el-option\n                    v-for="item in selectOptions"\n                    :key="item.value"\n                    :label="item.label"\n                    :value="item.value">\n            </el-option>\n        </el-select>\n    </div>\n';t["default"]={name:"select_remote",template:s,vm:new o["default"]({props:{disabled:Boolean,value:{type:String|Array|Number,default:""},size:{type:String,default:"small"},placeholder:{type:String,default:"请输入关键词"},remoteApi:{type:String,default:""},multiple:{type:Boolean,default:!1},multipleLimit:{type:Number,default:0},filterable:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},change:{type:Function,default:function(){}},noDataText:{type:String,default:"无数据"},field:{type:String,default:""}},data:function(){return{selected:void 0,selectOptions:[],loading:!1,key:0}},watch:{value:{handler:function(e,t){this.selected=parseInt(e)},immediate:!0}},beforeCreate:function(){},created:function(){var e=this;this._.delay((function(){return e.init()}),200)},methods:{init:function(){var e="object"!==Object(i["a"])(this.value)?this.value:this.value.join(",");this.getList({id:e})},remoteMethod:function(e){var t=this;""!==e&&e.length>=1?this._.debounce((function(){return t.getList({kw:e})}),100):this.selectOptions=[]},getList:function(e){var t=this;Object(a["a"])({url:Object(r["i"])(this.$props.remoteApi,this.$props.formCreate.formData()),params:e}).then((function(e){"undefined"!==typeof e.payload&&(t.selectOptions=e.payload.map((function(e){return e}))||[])})).catch((function(e){console.log(e)}))},onChange:function(){var e=this.selected;this.change(e,e),this.$emit("input",e),this.$emit("change",e),console.log(this.$props.field),this.$props.formCreate.getRule(this.$props.field).on.change(e)}}})}},3922:function(e,t,n){"use strict";n.r(t),n.d(t,"uploadDefaultJson",(function(){return s})),n.d(t,"uploadDownload",(function(){return l})),n.d(t,"oldConfig",(function(){return c})),n.d(t,"testSubForm",(function(){return u})),n.d(t,"allTest",(function(){return p}));var i="http://hyperf-admin.oss-cn-beijing.aliyuncs.com/1/202005/d88c70177909219c796d48f6271c16e5.jpg",o="http://hyperf-admin.oss-cn-beijing.aliyuncs.com/1/202005/ea44833429be5fcfc09d3986a8a2d521.vue",a="http://hyperf-admin.oss-cn-beijing.aliyuncs.com/1/202005/ccb89ff883f64059584bc2032a5a584a.png",r="http://hyperf-admin.oss-cn-beijing.aliyuncs.com/1/202005/195edb441ff6a44be058e2c68ea4ddd1.png",s={type:"v-upload",field:"testUpload",title:"测试图片上传",value:i,props:{limit:2,format:["jpg","jpeg","png","gif"],maxSize:100,beforeRemove:function(){console.warn("不能删除")}}},l={type:"v-upload",field:"testUploadDownload",title:"测试文件下载",value:[o,i,a,r],props:{downloadable:!0,limit:5,width:160,height:100}},c={title:"test",field:"config.popup_image",type:"image",value:[i,a],props:{multiple:!0,limit:5,width:60,height:100}},u={title:"测试subForm",field:"config.style_config",type:"sub-form",value:[{image:i,schema:"12"},{image:a,schema:"123"},{image:"",schema:""}],props:{max:5,min:2,rules:[{title:"内嵌图片",field:"image",type:"v-upload",value:"",props:{multiple:!0,limit:1}},{title:"跳转链接",field:"schema",type:"input",value:"",props:{maxlength:255}}],repeat:!0},info:"可添加2~5张图片"},p=[s,l,c,u]},"3f37":function(e,t,n){},"3fef":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],ref:"iconSelect",attrs:{placeholder:"请选择图标",clearable:!0,size:"small"},on:{focus:e.popoverShowFun,change:e.onChange},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[n("template",{slot:"prepend"},[e.prefixIcon.indexOf("oms-icon")>-1?n("i",{class:e.prefixIcon}):n("icon",{attrs:{icon:e.prefixIcon}})],1)],2),e._v(" "),n("el-popover",{ref:"popover",staticStyle:{padding:"0"},attrs:{trigger:"click",placement:"bottom-start",width:e.popoverWidth||300}},[n("el-scrollbar",[n("div",{staticClass:"icon-content"},e._l(e.icons,(function(t,i){return n("div",{key:i,class:{active:e.name===t,"icon-item":!0},attrs:{title:t},on:{click:function(n){return e.choseOne(t)}}},[t.indexOf("oms-icon")>-1?n("i",{class:t}):n("icon",{attrs:{icon:t}})],1)})),0)])],1)],1)},o=[],a=(n("7f7f"),n("75fc")),r=n("8cb2"),s=["el-icon-platform-eleme","el-icon-eleme","el-icon-delete-solid","el-icon-delete","el-icon-s-tools","el-icon-setting","el-icon-user-solid","el-icon-user","el-icon-phone","el-icon-phone-outline","el-icon-more","el-icon-more-outline","el-icon-star-on","el-icon-star-off","el-icon-s-goods","el-icon-goods","el-icon-warning","el-icon-warning-outline","el-icon-question","el-icon-info","el-icon-remove","el-icon-circle-plus","el-icon-success","el-icon-error","el-icon-zoom-in","el-icon-zoom-out","el-icon-remove-outline","el-icon-circle-plus-outline","el-icon-circle-check","el-icon-circle-close","el-icon-s-help","el-icon-help","el-icon-minus","el-icon-plus","el-icon-check","el-icon-close","el-icon-picture","el-icon-picture-outline","el-icon-picture-outline-round","el-icon-upload","el-icon-upload2","el-icon-download","el-icon-camera-solid","el-icon-camera","el-icon-video-camera-solid","el-icon-video-camera","el-icon-message-solid","el-icon-bell"],l=["oms-icon-pay","oms-icon-transfer","oms-icon-optimization","oms-icon-collect","oms-icon-cube","oms-icon-store","oms-icon-project","oms-icon-automation","oms-icon-afterSale","oms-icon-attribute","oms-icon-govern","oms-icon-nodata","oms-icon-addChild","oms-icon-gui","oms-icon-tool","oms-icon-baoxian","oms-icon-vip","oms-icon-bao","oms-icon-index","oms-icon-audit","oms-icon-toggle","oms-icon-ad","oms-icon-gift","oms-icon-coupons","oms-icon-lucky","oms-icon-sort","oms-icon-happy","oms-icon-duanxin","oms-icon-aikucun","oms-icon-wenhao"],c={name:"IconSelect",components:{Icon:r["default"]},props:{disabled:Boolean,value:{type:String,default:""},size:{type:String,default:"small"},field:{type:String,default:""}},data:function(){var e=["example","dashboard","eye","eye-open","form","link","nested","password","table","tree","user"].concat(Object(a["a"])(s),Object(a["a"])(l));return{name:"",data:void 0,popoverWidth:"",popoverShow:!1,prefixIcon:"",icons:e}},watch:{value:{handler:function(e,t){this.name=e,this.prefixIcon=e},immediate:!0}},methods:{onChange:function(){if(-1===this.icons.indexOf(this.name)&&""!==this.name)return this.$message({message:"不存在的icon名 "+this.name,type:"warning"}),this.name=this.value,void(this.prefixIcon=this.value);var e=this.name;this.$emit("input",e),this.$emit("change",e)},popoverShowFun:function(){this.popoverWidth=this.$refs.iconSelect.$el.clientWidth<300?300:this.$refs.iconSelect.$el.clientWidth,this.popoverShow=!this.popoverShow},choseOne:function(e){console.log(e),this.prefixIcon=e,this.name=e,this.onChange()}}},u=c,p=(n("f089"),n("2877")),d=Object(p["a"])(u,i,o,!1,null,"1197f4b2",null);t["default"]=d.exports},"5a30":function(e,t,n){"use strict";n("7d1a")},"63df":function(e,t,n){"use strict";n.r(t),n.d(t,"test1",(function(){return o})),n.d(t,"test2",(function(){return a})),n.d(t,"test3",(function(){return r})),n.d(t,"test4",(function(){return s})),n.d(t,"test5",(function(){return l})),n.d(t,"test6",(function(){return c})),n.d(t,"allTest",(function(){return u}));var i=[{value:11,label:"第 _ num11 _ 个"},{value:"1",label:"第 _ yi _ 个"},{value:"2",label:"第 _ er _ 个"},{value:"3",label:"第 _ 3 _ 个"},{value:"123",label:"第 _ 123 _ 个"},{value:"13",label:"第 _ 13 _ 个"},{value:"12",label:"第 _ 12 _ 个"},{value:"23",label:"第 _ 23 _ 个"},{value:"21",label:"第 _ 21 _ 个"},{value:"22",label:"第 _ 22 _ 个"},{value:"a",label:"第 _ a _ 个"},{value:"b",label:"第 _ b _ 个"},{value:"ab",label:"第 _ ab _ 个"},{value:"ac",label:"第 _ ac _ 个"},{value:"bc",label:"第 _ bc _ 个"},{value:"abc",label:"第 _ abc _ 个"}],o={type:"select2",field:"testSelect2",title:"测试Select2",value:["1","2","3"],props:{options:i}},a={type:"select2",field:"test2",title:"合并tag",value:["1","2","3"],props:{options:i,collapseTags:!0},validate:[{message:"测试表单校验",required:!0,trigger:"change"}]},r={type:"select2",field:"test3",title:"远程搜索",value:["1","2","3"],props:{options:i,collapseTags:!0,remote:!0,selectApi:"/search/saleattr"}},s={type:"select2",field:"test4",title:"allowCreate",value:["1","2","我是自定义的"],props:{options:i,allowCreate:!0}},l={type:"select2",field:"test5",title:"defaultFirstOption",value:["1","2","3"],props:{options:i,defaultFirstOption:!0}},c={type:"select2",field:"test6",title:"defaultFirst&allow",value:["我是自定义的","2","3"],props:{options:i,allowCreate:!0,defaultFirstOption:!0}},u=[o,a,r,s,l,c]},"64ab":function(e,t,n){},6820:function(e,t,n){"use strict";n.r(t);n("ac6a");var i=n("a026"),o=n("2ef0"),a=n.n(o),r=n("b775"),s='\n    <div class="group-checkbox">\n        <el-button v-if="loadingText" type="text" style="color: #606266;" :loading="loading">{{ loadingText }}</el-button>\n        <el-collapse>\n          <el-collapse-item v-for="(group, groupIndex) in checkOptions" :key="groupIndex" :title="group.label" :name="groupIndex">\n            <template slot="title">\n              <span style="margin-right: 5px;"><strong>{{ group.label }}</strong></span>\n              <el-checkbox v-model="group.checkAll" :label="group.value" :indeterminate="group.isIndeterminate" @change="handleCheckAll(group)">全选</el-checkbox>\n            </template>\n            <div v-if="onlyPid">\n                <el-tag style="margin:16px 16px 0" v-for="(row, index) in group.options" :key="row.value" :label="row.value">{{ row.label }}</el-tag>\n            </div>\n            <el-checkbox-group v-else v-model="group.checkList">\n              <el-checkbox v-for="(row, index) in group.options" :key="row.value" :label="row.value" @change="checked => handdleCheckOption(checked, group, row.value)">{{ row.label }}</el-checkbox>\n            </el-checkbox-group>\n          </el-collapse-item>\n        </el-collapse>\n    </div>\n';t["default"]={type:"template",name:"gcheckbox",template:s,vm:new i["default"]({props:{disabled:Boolean,onlyPid:{type:Boolean,default:!1},title:{type:String,default:""},remoteApi:{type:String,default:""},field:{type:String,default:""},noDataText:{type:String,default:"暂无数据"}},data:function(){return{loadingText:"拼命加载中",checkList:[],checkOptions:[],loading:!0}},beforeCreate:function(){},created:function(){var e=this;this._.delay((function(){return e.init()}),200)},methods:{init:function(){this.getList()},getList:function(){var e=this;console.log(this.$props.remoteApi),""!==this.$props.remoteApi?Object(r["a"])({url:this.$props.remoteApi,params:{id:this.$props.formCreate.formData().id}}).then((function(t){"undefined"!==typeof t.payload?(e.checkOptions=t.payload.map((function(t){return e.checkList=a.a.concat(e.checkList,t.checkList),t}))||[],e.closeLoading(),e.changeCheckList()):e.closeLoading(e.$props.noDataText)})).catch((function(t){console.log(t),e.closeLoading(e.$props.noDataText)})):this.closeLoading()},closeLoading:function(e){this.loadingText=e,this.loading=!1},handleCheckAll:function(e){var t=this.getOptionValues(e);e.checkList=e.checkAll?a.a.without(t,e.value):[],e.checkAll?this.checkList=a.a.uniq(a.a.concat(this.checkList,this.onlyPid?[e.value]:t)):this.checkList=a.a.uniq(a.a.difference(this.checkList,this.onlyPid?[e.value]:t)),console.log(e.checkAll,this.onlyPid?[e.value]:t,this.checkList,this.onlyPid),e.isIndeterminate=!1,this.changeCheckList()},getOptionValues:function(e){var t=[];return t.push(e.value),void 0!==e.options&&e.options.forEach((function(e){t.push(e.value)})),t},handdleCheckOption:function(e,t,n){var i=t.checkList.length,o=this.getOptionValues(t).length-1;t.checkAll=i===o,t.isIndeterminate=i>0&&i<o,e?this.checkList.push(n):this.checkList=a.a.without(this.checkList,n),t.checkAll?this.checkList.push(t.value):0===i&&(this.checkList=a.a.without(this.checkList,t.value)),this.changeCheckList()},changeCheckList:function(){var e=a.a.uniq(this.checkList);this.$emit("input",e),this.$emit("change",e),this.$props.formCreate.getRule(this.$props.field).on.change(e)}}})}},"6cba":function(e,t,n){"use strict";n.r(t);var i=n("a026");t["default"]={template:'<el-input v-model="data" @change="onChange" :size="size" :disable="disabled"></el-input>',vm:new i["default"]({props:{disabled:Boolean,value:{type:String,default:""},size:{type:String,default:"small"},field:{type:String,default:""}},data:function(){return{data:void 0}},watch:{value:function(e){this.data=e}},beforeCreate:function(){},created:function(){},methods:{onChange:function(){var e=this.selected;this.change(e,e),this.$emit("input",e),this.$emit("change",e),console.log(this.$props.field),this.$props.formCreate.getRule(this.$props.field).on.change(e)}}})}},"6fec":function(e,t,n){"use strict";function i(e){return Object.assign(e,{type:"template"})}n.r(t),t["default"]=function(e){var t=n("ebda").resolve("./".concat(e,".js")),o=i(n("ebda")("./".concat(e,".js")).default);return delete n.c[t],o}},"71a8":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return maker}));var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__),_components_CustomForm__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("6fec"),lodash__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("2ef0"),lodash__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__),_utils_auth__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5f87");function gen(e,t,n){return void 0===e?e:e[t]?e[t]:n}function merge(e,t){return lodash__WEBPACK_IMPORTED_MODULE_5___default.a.merge(e,t)}var uploadImageDefault={type:"select",uploadType:"image",action:"/api/upload/image",multiple:!0,headers:{"X-Token":Object(_utils_auth__WEBPACK_IMPORTED_MODULE_6__["b"])()},accept:"image/*",format:["jpg","jpeg","png","gif"],autoUpload:!0,maxSize:2048},uploadFileDefault={headers:{"X-Token":Object(_utils_auth__WEBPACK_IMPORTED_MODULE_6__["b"])()},action:"/api/upload/image",uploadType:"file",multiple:!0,limit:1,autoUpload:!0};function rangeDate(e,t,n){return t&&!n?e.getTime()<new Date(t.replace(/-/g,"/")).getTime():!t&&n?e.getTime()>new Date(n.replace(/-/g,"/")).getTime():e.getTime()<new Date(t.replace(/-/g,"/")).getTime()||e.getTime()>new Date(n.replace(/-/g,"/")).getTime()}var shortcut={afterToday:function(e){return e.getTime()<Date.now()-864e5},beforeToday:function(e){return e.getTime()>Date.now()-864e5}},disabledDate=function(e){if("string"===typeof e)return function(t){return shortcut[e](t)};var t=e.after,n=e.before;return function(e){return rangeDate(e,t,n)}},map={input:function(e){return e.type="v-input",e.props.showCopy=!!e.copy_show,e.props.clearable=!0,e.props.placeholder=gen(e.props,"placeholder","请输入"+e.title),e.props.maxlength=gen(e.props,"maxlength",100),e.props.showWordLimit=gen(e.props,"showWordLimit",!0),e},textarea:function(e){return e.type="v-input",e.props.type="textarea",e.props.placeholder=gen(e.props,"placeholder","请输入"+e.title),e.props.showWordLimit=gen(e.props,"showWordLimit",!0),e},number:function(e){return e.type="InputNumber",e.props=Object.assign({max:99999999999,precision:0},e.props),e},float:function(e){return e.type="InputNumber",e.props=Object.assign({max:99999999999},e.props),e},select:function(e){return e.props.clearable=!0,e.props.style=gen(e.props,"style","width:100%"),e.props.placeholder=gen(e.props,"placeholder","请选择"+e.title),e.props.filterable=gen(e.props,"filterable",!0),e.props.defaultFirstOption=gen(e.props,"defaultFirstOption",!0),e.props.automaticDropdown=gen(e.props,"automaticDropdown",!0),void 0!==e.props.selectApi&&(e.props.remote=!0),e.props.multiple&&(e.type="select2",e.props.options=e.options),e},switch:function(e){return e.props.activeValue=gen(e.props,"activeValue",1),e.props.inactiveValue=gen(e.props,"inactiveValue",0),e},datetime:function(e){return e.type="DatePicker",e.props.placeholder=gen(e.props,"placeholder","请选择"+e.title),e.props.type="datetime",e.props.format=gen(e.props,"format","yyyy-MM-dd HH:mm:ss"),e.props.valueFormat=gen(e.props,"valueFormat","yyyy-MM-dd HH:mm:ss"),e},datetime_range:function(e){return e.type="DatePicker",e.props=Object.assign({startPlaceholder:"开始时间",endPlaceholder:"结束时间"},e.props),e.props.type="datetimerange",e.props.unlinkPanels=!0,e.props.format=gen(e.props,"format","yyyy-MM-dd HH:mm:ss"),e.props.valueFormat=gen(e.props,"valueFormat","yyyy-MM-dd HH:mm:ss"),e.props.range&&(e.props.pickerOptions=e.props.pickerOptions||{},e.props.pickerOptions.disabledDate=disabledDate(e.props.range),console.log(e.props.pickerOptions.disabledDate)),e},date:function(e){return e.type="DatePicker",e.props.placeholder=gen(e.props,"placeholder","请选择"+e.title),e.props.type="date",e.props.format=gen(e.props,"format","yyyy-MM-dd"),e.props.valueFormat=gen(e.props,"valueFormat","yyyy-MM-dd"),e},date_range:function(e){return e.type="DatePicker",e.props=Object.assign({startPlaceholder:"开始时间",endPlaceholder:"结束时间"},e.props),e.props.type="daterange",e.props.unlinkPanels=!0,e.props.format=gen(e.props,"format","yyyy-MM-dd"),e.props.valueFormat=gen(e.props,"valueFormat","yyyy-MM-dd"),e},image:function(e){return e.type="v-upload",e.props=Object.assign({},uploadImageDefault,e.props),void 0!==e.props.bucket&&(e.props.action=e.props.action+"?bucket="+e.props.bucket),void 0!==e.props.private&&(e.props.action=e.props.action+"&private="+e.props.bucket),e},file:function(e){return e.type="v-upload",e.props=Object.assign({},uploadFileDefault,e.props),e},cascader:function(e){return e.props.placeholder=gen(e.props,"placeholder","请选择"+e.title),e.props.changeOnSelect=gen(e.props,"changeOnSelect",!0),e.props.filterable=gen(e.props,"filterable",!0),e.props.options=gen(e,"options",[]),e},json:function(e){return e.type="v-jsoneditor",e.props={},e},html:function(e){return e.type="vue-editor",e},inputRange:function(e){return e.type="input-range",e},code:function(e){return e.type="code-mirror",e},json2:function(e){return e.type="code-mirror",e.props.mode="application/json",e.props.type="json",e},"sub-form":function(e){return e.props.field=e.field,e}};function maker(row){if(row.native)return row;if(row.validate&&row.validate.length>0&&row.validate.forEach((function(item){item.pattern&&(item.pattern=new RegExp(eval(item.pattern)))})),row.field.indexOf("-")>-1&&console.error('字段名中有保留字符"-"'),row.field=row.field.split(".").join("-"),void 0===row.type&&(row.type="input"),row.props=row.props?row.props:{},row.props.size="small",void 0!==map[row.type])return map[row.type](row);if(row.custom){var custom=merge(row,Object(_components_CustomForm__WEBPACK_IMPORTED_MODULE_4__["default"])(row.type));return console.log(__webpack_require__.c),custom.type="template",custom.props.field=row.field,custom}return row}},7792:function(e,t,n){"use strict";n("911c")},"782a":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-codemirror",class:{merge:e.merge}},[e.merge?n("div",{ref:"mergeview"}):n("textarea",{ref:"textarea",attrs:{name:e.name,placeholder:e.placeholder}}),e._v(" "),n("div",{staticStyle:{float:"right"}},[n("el-switch",{attrs:{size:"mini","active-text":"Vim"},on:{change:e.vimSwitch},model:{value:e.keymap_vim,callback:function(t){e.keymap_vim=t},expression:"keymap_vim"}}),e._v(" "),n("el-switch",{attrs:{size:"mini","active-text":"Dark"},on:{change:e.changeTheme},model:{value:e.dark_theme,callback:function(t){e.dark_theme=t},expression:"dark_theme"}})],1)])},o=[],a=(n("a481"),n("ac6a"),n("56b3")),r=n.n(a),s=(n("a7be"),n("8c2e"),n("cc10"),n("44d5"),n("31c5"),n("9948"),n("b933"),n("9c7b"),n("715d"),n("23de"),n("4ba6"),n("8c33"),n("7289"),n("2aed"),n("d72f"),n("0b6c"),n("9a48"),n("75f8"),n("697e"),n("aedd"),n("164b"),n("4895"),n("cbc8"),n("8d70"),n("9f09"),n("a2c1"),n("f6b6"),n("9b74"),n("832b"),n("21fd")),l=n.n(s),c=window.CodeMirror||r.a;window.CodeMirror=c,"function"!==typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0});var u={name:"Codemirror",props:{code:{type:String,default:""},value:{type:String,default:""},marker:{type:Function,default:function(e){}},unseenLines:{type:Array,default:function(e){return[]}},name:{type:String,default:"codemirror"},placeholder:{type:String,default:""},merge:{type:Boolean,default:!1},options:{type:Object,default:function(){}},events:{type:Array,default:function(){return[]}},globalOptions:{type:Object,default:function(){return{}}},globalEvents:{type:Array,default:function(){return[]}},mode:{type:String,default:"text/x-php"},type:{type:String,default:""}},data:function(){return{content:"",codemirror:null,cminstance:null,keymap_vim:!1,dark_theme:!1,defaultOptions:{lineWrapping:!0,matchBrackets:!0,indentWithTabs:!0,indentUnit:4,tabSize:4,foldGutter:!0,gutters:["note-gutter","CodeMirror-linenumbers"],styleActiveLine:!0,lineNumbers:!0,line:!0,keyMap:"vim",mode:this.$props.mode,theme:"default",indentAuto:!0,extraKeys:{"Cmd-/":"toggleComment",F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){if(!e.getOption("fullScreen"))return c.Pass;e.setOption("fullScreen",!1)},Enter:function(e){if(!e.state.completionActive)return c.Pass}}},line_widget:[],error_line:[]}},watch:{options:{deep:!0,handler:function(e){for(var t in e)this.cminstance.setOption(t,e[t])}},merge:function(){this.$nextTick(this.switchMerge)},code:function(e){this.handelCodeChange(e)},value:function(e){this.handelCodeChange(e)}},mounted:function(){this.initialize()},beforeDestroy:function(){this.destroy()},methods:{initialize:function(e){var t=this,n=Object.assign({},this.globalOptions,this.defaultOptions,this.options,e);this.merge?(this.codemirror=c.MergeView(this.$refs.mergeview,n),this.cminstance=this.codemirror.edit):(this.codemirror=c.fromTextArea(this.$refs.textarea,n),this.cminstance=this.codemirror,this.cminstance.setValue(this.code||this.value||this.content)),this.cminstance.on("change",(function(e){if(t.content=e.getValue(),"json"===t.$props.type){var n=t.isJson(t.content);t.showJsonError(n)}t.$emit&&(t.$emit("input",t.content),t.$emit("change",t.content))})),c.on(this.cminstance,"keyup",(function(e,t){var n=e.getCursor(),i=e.doc.getLine(n.line).substr(n.ch-2,n.ch);!e.state.completionActive&&/[a-zA-z]{2,}/.test(i)}));var i={},o=["scroll","changes","beforeChange","cursorActivity","keyHandled","inputRead","electricInput","beforeSelectionChange","viewportChange","swapDoc","gutterClick","gutterContextMenu","focus","blur","refresh","optionChange","scrollCursorIntoView","update"];o.concat(this.events).concat(this.globalEvents).filter((function(e){return!i[e]&&(i[e]=!0)})).forEach((function(e){t.cminstance.on(e,(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];t.$emit.apply(t,[e].concat(i));var a=e.replace(/([A-Z])/g,"-$1").toLowerCase();a!==e&&t.$emit.apply(t,[a].concat(i))}))})),this.pairUp(),this.$emit("ready",this.codemirror),this.unseenLineMarkers(),this.refresh()},refresh:function(){var e=this;this.$nextTick((function(){e.cminstance.refresh()}))},destroy:function(){var e=this.cminstance.doc.cm.getWrapperElement();e&&e.remove&&e.remove()},handelCodeChange:function(e){var t=this.cminstance.getValue();if(e!==t){var n=this.cminstance.getScrollInfo();this.cminstance.setValue(e),this.content=e,this.cminstance.scrollTo(n.left,n.top)}this.unseenLineMarkers()},unseenLineMarkers:function(){var e=this;void 0!==this.unseenLines&&void 0!==this.marker&&this.unseenLines.forEach((function(t){var n=e.cminstance.lineInfo(t);e.cminstance.setGutterMarker(t,"breakpoints",n.gutterMarkers?null:e.marker())}))},switchMerge:function(){var e=this.cminstance.doc.history,t=this.cminstance.doc.cleanGeneration;this.options.value=this.cminstance.getValue(),this.destroy(),this.initialize(),this.cminstance.doc.history=e,this.cminstance.doc.cleanGeneration=t},vimSwitch:function(e){this.cminstance.setOption("keyMap",e?"vim":"sublime")},pairUp:function(){var e=this,t=function(e,t){var n={},i="'"+e+"'";return n["name"]="autoInsertParentheses"+e,n[i]=function(n){var i=n.getCursor();n.replaceRange(e+t,i,i,"+insert"),n.doc.setCursor({line:i.line,ch:i.ch+1})},n};[["[","]"],["(",")"],["{","}"],["<",">"],["'","'"],['"','"']].forEach((function(n){e.cminstance.addKeyMap(t(n[0],n[1]))}))},isJson:function(e){e=e.replace(/\/\/[^"]+?$/gm,"").replace(/^\s*\/\/.*?$/gm,"");try{return l.a.parse(e),!0}catch(t){return t.message}},showJsonError:function(e){if(!0!==e){if(""!==e&"Invalid array length"!==e){var t=/Parse error on line (\d+)/.exec(e),n=parseInt(t[1])-1,i=document.createElement("i");i.setAttribute("class","el-tag__close el-icon-close line-error"),this.cminstance.setGutterMarker(n,"note-gutter",i)}}else this.cminstance.clearGutter("note-gutter")},changeTheme:function(e){this.cminstance.setOption("theme",e?"base16-dark":"default")}}},p=u,d=(n("c5e9"),n("2877")),f=Object(d["a"])(p,i,o,!1,null,null,null);t["default"]=f.exports},"79eb":function(e,t,n){},"7d1a":function(e,t,n){},"829e":function(e,t,n){"use strict";n("afbc")},"8deb":function(e,t,n){"use strict";n("c9c9")},"911c":function(e,t,n){},a0c1:function(e,t,n){"use strict";n("3f37")},a215:function(e,t,n){"use strict";n("7f7f"),n("ac6a");function i(e,t,n){this.$children.forEach((function(o){var a=o.$options.name;a===e?o.$emit.apply(o,[t].concat(n)):i.apply(o,[e,t].concat([n]))}))}t["a"]={methods:{dispatch:function(e,t,n){var i=this.$parent||this.$root,o=i.$options.name;while(i&&(!o||o!==e))i=i.$parent,i&&(o=i.$options.name);i&&i.$emit.apply(i,[t].concat(n))},broadcast:function(e,t,n){i.call(this,e,t,n)}}}},a243:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c_version",class:{is_version:e.show}},[e.show?n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("el-dropdown",{attrs:{placement:"bottom-start"},on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n          历史版本"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{staticStyle:{width:"500px"},attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.versions,(function(t,i){return n("el-dropdown-item",{key:i,class:{current_v:t.id===(e.value||e.versions[0].id)},attrs:{command:t}},[n("span",{staticStyle:{marginRight:"10px"}},[e._v(e._s(""+(t.create_at||"")))]),e._v("\n            "+e._s((t.username||"")+" 修改了:"+e.getModifyLabels(t.modify_fields))+"\n          ")])})),1)],1)],1),e._v(" "),e._t("default")],2):e._t("default")],2)},o=[],a=(n("28a5"),n("ac6a"),n("c5f6"),n("b775")),r={props:{value:{type:[String,Number],default:""},versions:{type:Array,default:function(e){return[]}},show:{type:Boolean,default:!1},rule:{type:Array,default:function(e){return[]}}},data:function(){return{newVersionWatcher:null}},watch:{show:{handler:function(e){e?this.checkNewVersion():this.newVersionWatcher&&clearInterval(this.newVersionWatcher)},immediate:!0}},beforeDestroy:function(){clearInterval(this.newVersionWatcher)},methods:{handleCommand:function(e){this.$emit("input",e.id),this.$emit("change",e.id)},getModifyLabels:function(e){if(e&&e.length>0){var t=[];return this.rule.forEach((function(n){e.indexOf(n.field)>-1&&t.push(n.title)})),t.join(",")}return""},checkNewVersion:function(){var e=this;this.newVersionWatcher||(this.newVersionWatcher=setInterval((function(){var t=e.versions.length?e.versions[0].id:0;Object(a["a"])({url:"/"+e.getSubject()+"/newversion/"+e.$route.params.id+"/"+t}).then((function(t){console.log(t),t.payload.has_new_version&&(clearInterval(e.newVersionWatcher),e.$alert(t.payload.message,"提示",{confirmButtonText:"刷新",showClose:!1,callback:function(e){location.reload()}}))})).catch((function(t){console.error(t),clearInterval(e.newVersionWatcher)}))}),5e3))},getSubject:function(){return this.$route.path.split("/")[1]}}},s=r,l=(n("29b8"),n("2877")),c=Object(l["a"])(s,i,o,!1,null,"fc951c38",null);t["default"]=c.exports},a37f:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-input-range",class:{isFocus:e.isFocus}},[n("el-input",e._b({staticClass:"range-start",attrs:{clearable:e.clearable,disabled:e.disabled,placeholder:e.placeholder[0]||"最小值"},on:{change:e.change,focus:e.focus,clear:e.clear,blur:e.blur,input:function(t){return e.input("startValue")}},nativeOn:{keydown:function(t){return e.keydown(t)}},model:{value:e.startValue,callback:function(t){e.startValue=e._n(t)},expression:"startValue"}},"el-input",e.attrs,!1)),e._v(" "),n("el-input",e._b({staticClass:"range-split",attrs:{tabindex:"1",placeholder:"~",readonly:"",disabled:e.disabled}},"el-input",e.attrs,!1)),e._v(" "),n("el-input",e._b({staticClass:"range-end",attrs:{placeholder:e.placeholder[1]||"最大值",clearable:e.clearable,disabled:e.disabled},on:{change:e.change,focus:e.focus,clear:e.clear,blur:e.blur,input:function(t){return e.input("endValue")}},nativeOn:{keydown:function(t){return e.keydown(t)}},model:{value:e.endValue,callback:function(t){e.endValue=e._n(t)},expression:"endValue"}},"el-input",e.attrs,!1))],1)},o=[],a=(n("a481"),n("c5f6"),n("28a5"),{props:{value:{type:[String,Array],default:""},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:Array,default:function(e){return[]}}},data:function(){return{isFocus:!1,startValue:"",endValue:"",valueType:"Array"}},computed:{inputValue:function(){var e=[this.formatNumber(this.startValue),this.formatNumber(this.endValue)],t=e[0],n=e[1];return"String"===this.valueType?""===t&&""===n?"":[t,n].join(","):""===t&&""===n?[]:[t,n]},attrs:function(){return Object.assign({},this.$attrs,{style:""})}},watch:{value:{handler:function(e){e="string"===typeof e?e.split(","):e||[],this.startValue=this.formatNumber(e[0]),this.endValue=this.formatNumber(e[1])},immediate:!0}},created:function(){this.valueType="string"===typeof this.value?"String":"Array"},methods:{formatNumber:function(e){return"undefined"===typeof e||null===e||""===e||isNaN(e)?"":Number(e)},keydown:function(e){},change:function(){this.$emit("change",this.inputValue)},blur:function(e){this.isFocus=!1,this.$emit("blur",e)},input:function(e){var t=this[e];"string"===typeof t&&(this[e]=/^d+$/.test(t)?t:t.replace(/[^0-9]/gi,"")),this.$emit("input",this.inputValue)},focus:function(e){this.isFocus=!0,this.$emit("focus",e)},clear:function(){this.$emit("clear")}}}),r=a,s=(n("5a30"),n("2877")),l=Object(s["a"])(r,i,o,!1,null,"feff32ac",null);t["default"]=l.exports},a54e:function(e,t,n){"use strict";n("29de")},afbc:function(e,t,n){},b4c4:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-upload",{ref:"upload",staticClass:"oms-upload",class:{hide:e.showUpload},attrs:{multiple:"","list-type":"picture-card",accept:e.accept,headers:e.headers,limit:e.limit,action:e.action,"auto-upload":!0,"before-upload":e.beforeUpload,"before-remove":e.beforeRemove,"on-success":e.handleSuccess,"on-change":e.handleChange,"on-exceed":e.onExceed},scopedSlots:e._u([{key:"file",fn:function(t){var i=t.file;return n("div",{staticClass:"file-slot",style:{width:e.width-2+"px",height:e.height-2+"px"}},[i.url?n("el-image",{ref:"image_"+i.uid,staticClass:"el-upload-list__item-thumbnail",attrs:{lazy:"",src:i.url,"preview-src-list":e.getImagePreviewList(e.value,i.url)}},[n("div",{staticClass:"file-icon",style:{lineHeight:e.height-2+"px"},attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-document"})])]):e._e(),e._v(" "),void 0!==i.percentage&&"success"!==i.status?n("el-progress",{staticClass:"progress",style:{width:e.width+"px",height:e.height+"px"},attrs:{width:e.width>e.height?e.height-2:e.width-2,type:"circle","stroke-width":6,percentage:e.parsePercentage(i.percentage)}}):n("span",{staticClass:"el-upload-list__item-actions"},[n("div",{staticClass:"actions"},[n("i",{staticClass:"el-icon-zoom-in preview",on:{click:function(t){return e.handlePreview(i)}}}),e._v(" "),e.downloadable?n("i",{staticClass:"el-icon-download download",on:{click:function(t){return e.handleDownload(i)}}}):e._e(),e._v(" "),n("i",{staticClass:"el-icon-delete delete",on:{click:function(t){return e.removeFile(i)}}})])])],1)}}])},[n("i",{staticClass:"el-icon-upload2 upload-icon",style:{width:e.width-2+"px",height:e.height-2+"px",lineHeight:e.height-2+"px"},attrs:{slot:"default"},slot:"default"}),e._v(" "),n("div",{attrs:{slot:"tip"},slot:"tip"},[e._t("tip")],2)])},o=[];n("7f7f"),n("28a5"),n("c5f6");function a(e){return Array.isArray(e)?e:void 0===e||null===e||""===e?[]:[e]}var r={props:{value:{type:[Array,String],default:""},width:{type:Number,default:70},height:{type:Number,default:70},headers:{type:Object,default:function(e){}},action:{type:String,default:"/api/upload/image"},downloadable:{type:Boolean,default:!1},removeConfirm:{type:Boolean,default:!1},removeConfirmText:{type:String,default:"此操作将删除该文件, 是否继续?"},limit:{type:Number,default:1},accept:{type:String,default:""},format:{type:Array,default:function(e){return[]}},maxSize:{type:Number,default:0},beforeRemove:{type:Function,default:function(){}}},data:function(){return{tempIndex:1,uploadList:[]}},computed:{showUpload:function(){return this.uploadList.length>=this.limit}},watch:{value:{handler:function(e){this.$refs.upload.uploadFiles.every((function(e){return!e.status||"success"===e.status}))&&(this.$refs.upload.uploadFiles=a(e).map(this.parseFile),this.uploadList=this.$refs.upload.uploadFiles)},deep:!0}},mounted:function(){this.$refs.upload.uploadFiles=a(this.value).map(this.parseFile),this.uploadList=this.$refs.upload.uploadFiles},methods:{parseFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n="";return this.uploadList[t]&&this.uploadList[t].url===e&&(n=this.uploadList[t].uid||Date.now()+this.tempIndex++),{url:e,name:e.split("/").pop(),status:"success",uid:n||Date.now()+this.tempIndex++}},updateValue:function(){if(this.$refs.upload.uploadFiles.every((function(e){return"uploading"!==e.status}))){var e=this.$refs.upload.uploadFiles.map((function(e){return e.url})).filter((function(e){return void 0!==e})),t=1===this.limit?e[0]||"":e;this.$emit("input",t),this.$emit("change",t)}},beforeUpload:function(e){var t={format:this.format,maxSize:this.maxSize},n=t.format,i=t.maxSize,o=e.name,a=e.size;return n&&n.length>0&&-1===n.indexOf(o.split(".").reverse()[0])?(this.$message.warning("格式错误，仅支持后缀名为 ".concat(n.join("、")," 的文件!")),!1):i&&i<a/1024?(this.$message.warning("文件大小不能超过 ".concat(i,"KB !")),!1):void 0},removeFile:function(e){var t=this;this.removeConfirm?this.$confirm(this.removeConfirmText,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!1}).then((function(){t.$refs.upload.handleRemove(e),t.updateValue()})).catch((function(){})):(this.$refs.upload.handleRemove(e),this.updateValue())},handlePreview:function(e){this.$refs["image_".concat(e.uid)].error?location.href=e.url:this.$refs["image_".concat(e.uid)].clickHandler()},handleDownload:function(e){this.$refs["image_".concat(e.uid)].error?location.href=e.url:window.open(e.url)},handleSuccess:function(e,t,n){if(0===e.code){var i=e.payload.url;this.$emit("success",e.payload),this.$notify.success({title:"上传成功",message:t.name}),t.url=i}else this.$notify.error({title:e.message||"上传失败",message:t.name})},onExceed:function(){this.$message.warning("最多只能上传".concat(this.limit,"个"))},handleChange:function(e,t){"fail"!==e.status&&"success"!==e.status||this.updateValue()},parsePercentage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return parseInt(e,10)},getImagePreviewList:function(e,t){var n=a(e),i=!0,o=[],r=[];return n.map((function(e){e!==t&&i?o.push(e):(e===t&&(i=!1),r.push(e))})),[].concat(r,o)}}},s=r,l=(n("3097"),n("2877")),c=Object(l["a"])(s,i,o,!1,null,"65eb4f7e",null);t["default"]=c.exports},b6e7:function(e,t,n){"use strict";n("cf1a")},b91a:function(e,t,n){"use strict";var i=n("30ba"),o=n.n(i),a=n("3fef"),r=n("cde7"),s=n("dc7c"),l=n("5873"),c=n("e1bf"),u=n("d5ab"),p=n("0c08"),d=n("b4c4"),f=n("1a2c"),h=n("0374"),m=n("a37f"),g=n("782a");o.a.component("TableTransfer",r["default"]),o.a.component("IconSelect",a["default"]),o.a.component("vue-editor",l["a"]),o.a.component("VJsoneditor",f["default"]),o.a.component("SubForm",s["default"]),o.a.component("TableForm",c["default"]),o.a.component("VInput",u["default"]),o.a.component("Select2",p["default"]),o.a.component("VUpload",d["default"]),o.a.component("InputRange",m["default"]),o.a.component("FormItemInfo",h["default"]),o.a.component("CodeMirror",g["default"]),t["a"]=o.a},c5e9:function(e,t,n){"use strict";n("79eb")},c9c9:function(e,t,n){},cb21:function(e,t,n){"use strict";n.r(t),n.d(t,"testJson",(function(){return i}));var i=[{logicName:"",name:"1",fuhao:"<",value:1,children:[{logicName:"&&",name:"1",fuhao:">",value:1.1},{logicName:"&&",name:"1",fuhao:">",value:1.2}]},{logicName:"||",name:"2",fuhao:"",value:""},{logicName:"&&",name:"3",fuhao:"<=",value:4.6},{logicName:"&&",name:"4",fuhao:"<=",value:4.6,children:[{logicName:"&&",name:"1",fuhao:">",value:4.4}]}]},cdce:function(e,t,n){"use strict";n("2574")},cde7:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-tansfer"},[n("el-row",{staticStyle:{margin:"0 0 5px 0"},attrs:{gutter:12}},[n("el-col",{staticStyle:{"padding-left":"0px"},attrs:{span:12}},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:"请输入"},model:{value:e.searchfilter,callback:function(t){e.searchfilter=t},expression:"searchfilter"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){return e.addRows(t)}}},[e._v("加入")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(t){return e.removeRows(t)}}},[e._v("移除")])],1)],1),e._v(" "),n("el-row",{attrs:{gutter:12}},[n("el-col",{attrs:{span:12}},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.leftData,border:"",size:"mini","max-height":"350","highlight-current-row":"","row-key":"id","header-cell-style":e.getRowClass,"empty-text":e.emptyText},on:{"selection-change":function(t){return e.handleSelectionChange(t,1)}}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),e._l(e.tableHeader,(function(e){return[[n("el-table-column",{key:e.field,attrs:{prop:e.field,label:e.title,with:e.with}})]]}))],2)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-table-draggable",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightData,border:"",size:"mini","header-cell-style":e.getRowClass,"empty-text":e.emptyText,"max-height":"350"},on:{"selection-change":function(t){return e.handleSelectionChange(t,2)}}},[n("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),e._l(e.tableHeader,(function(e){return[[n("el-table-column",{key:e.field,attrs:{prop:e.field,label:e.title,with:e.with}})]]}))],2)],1)],1)],1)],1)},o=[],a=(n("6762"),n("2fdb"),n("ac6a"),n("c5f6"),n("2ef0")),r=n.n(a),s=n("b775"),l=n("ed08"),c=n("8914"),u=n("5c96"),p={name:"TableTransfer",components:{ElTableDraggable:c["a"]},props:{disabled:Boolean,value:{type:[Array,String,Number],default:function(){return[]}},title:{type:String,default:""},remoteApi:{type:String,default:""},field:{type:String,default:""},tableHeader:{type:Array,default:function(){return[{title:"path",field:"uri"},{title:"请求方式",field:"http_method"},{title:"别名",field:"name"}]}}},data:function(){return{emptyText:"暂无数据",leftSelectionData:[],rightSelectionData:[],searchfilter:"",tableData:[],leftData:[],rightData:[]}},watch:{searchfilter:function(e){var t=this,n=this;this.leftData=this.tableData.filter((function(n){return t.filterMethod(n,e)}),n)},rightData:function(){this.updateValue()}},beforeCreate:function(){},created:function(){var e=this;this._.delay((function(){return e.init()}),200)},methods:{init:function(){this.getList()},getList:function(){var e=this;if(""!==this.$props.remoteApi){var t={id:this.$props.value};Object(s["a"])({url:Object(l["i"])(this.$props.remoteApi,t)}).then((function(t){"undefined"!==typeof t.payload.left&&(e.tableData=t.payload.left.map((function(e){return e}))||[],e.leftData=e.tableData,e.rightData=t.payload.right.map((function(e){return e}))||[])})).catch((function(e){console.log(e)}))}},filterMethod:function(e,t){var n=!t;return this.tableHeader.forEach((function(i){!1===n&&(n=e[i.field].toLowerCase().includes(t.toLowerCase()))})),n},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0===t?"line-height:20px;background:#fafafa;":""},addRows:function(){0!==this.leftSelectionData.length?(this.tableData=r.a.differenceBy(this.tableData,this.leftSelectionData,"id"),this.leftData=this.tableData,this.rightData=r.a.uniqBy(r.a.concat(this.rightData,this.leftSelectionData),"id")):Object(u["Message"])({message:"请勾选左侧数据",type:"warning",duration:5e3})},removeRows:function(){0!==this.rightSelectionData.length?(this.rightData=r.a.differenceBy(this.rightData,this.rightSelectionData,"id"),this.tableData=r.a.uniqBy(r.a.concat(this.tableData,this.rightSelectionData),"id"),this.leftData=this.tableData):Object(u["Message"])({message:"请勾选右侧数据",type:"warning",duration:5e3})},updateValue:function(){var e=[];this.rightData.length>0&&(this.rightData.forEach((function(t){e.push(t.id)})),e=r.a.uniq(e)),this.$emit("input",e),this.$emit("change",e)},handleSelectionChange:function(e,t){1===t?this.leftSelectionData=e:this.rightSelectionData=e}}},d=p,f=n("2877"),h=Object(f["a"])(d,i,o,!1,null,"f89e23b0",null);t["default"]=h.exports},cdea:function(e,t,n){"use strict";n("2b83")},cf1a:function(e,t,n){},d5ab:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-input",e._b({attrs:{"show-word-limit":e.showWordLimit,rows:e.rows,clearable:e.clearable,disabled:e.disabled,readonly:e.readonly,autosize:e.autosize},on:{change:e.change,focus:e.focus,clear:e.clear,blur:e.blur,input:e.input},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},"el-input",e.$attrs,!1),[e.showCopy?n("el-button",{attrs:{slot:"append",icon:"el-icon-copy-document"},on:{click:e.copy},slot:"append"}):e._e()],1)},o=[],a=(n("c5f6"),n("5c96")),r={props:{value:{type:[String,Number],default:""},showWordLimit:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:6},showCopy:{type:Boolean,default:!1}},data:function(){return{inputValue:""}},watch:{value:{handler:function(e){this.inputValue=e||""},immediate:!0}},created:function(){},methods:{change:function(e){this.$emit("change",e)},blur:function(e){this.$emit("blur",e)},focus:function(e){this.$emit("focus",e)},clear:function(){this.$emit("clear")},input:function(){this.$emit("input",this.inputValue),this.$emit("inputNative",this.inputValue)},copy:function(e){var t=document.createElement("input");document.body.appendChild(t),t.setAttribute("value",this.inputValue),t.select(),document.execCommand("copy")&&(Object(a["Message"])({message:"已复制到剪贴板",type:"success",duration:1e3}),this.$emit("copy")),document.body.removeChild(t)}}},s=r,l=(n("a0c1"),n("2877")),c=Object(l["a"])(s,i,o,!1,null,"349fa099",null);t["default"]=c.exports},dc7c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sub-group"},[n("div",{class:{"sub-form-content":!0,"sub-form-border":e.repeat&&!e.inlineForm,"sub-form-inline":e.inlineForm}},[n("Draggable",e._b({on:{update:e.datadragEnd},model:{value:e.dragKeyList,callback:function(t){e.dragKeyList=t},expression:"dragKeyList"}},"Draggable",{animation:500,handle:".icon-drag"},!1),[n("transition-group",e._l(e.dragKeyList,(function(t,i){return n("div",{key:"key"+t,staticClass:"repeat-cell"},[e.sort&&e.repeat?n("i",{staticClass:"icon-drag oms-icon-sort"}):e._e(),e._v(" "),n("VForm",{key:t,ref:"form",refInFor:!0,staticClass:"sub-form-body",attrs:{option:e.formOptions,rules:e.cacheRule[t],"compute-map":e.computeMap},on:{mounted:function(n){return e.add$f(i,t,n)},change:function(t,n,i){return e.onChange(t,n,i)}}}),e._v(" "),e.repeat?n("i",{staticClass:"icon-remove el-icon-remove-outline",on:{click:function(n){return e.deleteRow(t)}}}):e._e()],1)})),0)],1),e._v(" "),e.repeat?n("i",{staticClass:"icon-add el-icon-circle-plus-outline",on:{click:function(t){return e.addRule("add")}}}):e._e()],1)])},o=[],a=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("a481"),n("ac6a"),n("c5f6"),n("b76a")),r=n.n(a),s=n("5c96");function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p={name:"SubForm",components:{VForm:function(){return Promise.resolve().then(n.bind(null,"1411"))},Draggable:r.a},inject:{elForm:{default:""},elFormItem:{default:""}},props:{disabled:Boolean,sort:Boolean,repeat:Boolean,border:{type:Boolean,default:!0},field:{type:String,default:""},value:{type:[Array,Object],default:function(e){return[]}},option:{type:Object,default:function(e){}},rule:{type:Object,default:function(e){}},rules:{type:Array,default:function(e){return[]}},max:{type:Number,default:10},min:{type:Number,default:1},computeMap:{type:Object,default:function(e){}}},data:function(){return{len:0,group$f:{},cacheRule:{},dragKeyList:[],inlineForm:!1,formOptions:{injectEvent:!0,submitBtn:!1,resetBtn:!1}}},computed:{formRule:function(){return this.rule?[this.rule]:this.rules?this.rules:[]}},watch:{value:{handler:function(e){var t=this;0===e.length&&(e=[this.rule?this.rule.value||"":this.rules.map((function(e){return e.value||""}))]);var n=this.dragKeyList,i=n.length,o=i-e.length;if(o<0){for(var a=o;a<0;a++)this.addRule(n[a]);for(var r=0;r<i;r++)this.setValue(this.group$f[n[r]],e[r])}else{if(o>0)for(var s=0;s<o;s++)this.removeRule(n[i-s-1]);e.forEach((function(i,o){t.setValue(t.group$f[n[o]],e[o])}))}},immediate:!0,deep:!0}},created:function(){var e=this;this.formOptions=Object.assign(this.formOptions,this.option),this.formOptions.form&&this.formOptions.form.inline&&(this.inlineForm=!0),this.elFormItem&&(this.elFormItem.validate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e.validate()?n():(n("subForm validate error",[e.field]),e.elForm&&e.elForm.$emit("validate",e.field,!0,"subForm validate error"))})},methods:{validate:function(){var e=!0,t=this.$refs.form;return t.forEach((function(t){t.validate()||(e=!1)})),e},datadragEnd:function(e){e.preventDefault(),this.updateData()},transformFormData:function(e,t,n){var i={};for(var o in e)i[o.replace(t,n)]=e[o];return i},updateData:function(){var e,t=[],n=l(this.dragKeyList);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.rule?this.group$f[i]&&t.push(this.group$f[i].formData()[this.rule.field]):!this.group$f[i]||t.push(this.transformFormData(this.group$f[i].formData(),"-","."))}}catch(o){n.e(o)}finally{n.f()}this.$emit("input",t),this.$emit("change",t,this.value)},onChange:function(e,t,n){t&&this.updateData()},setValue:function(e,t){if(this.rule){var n=e.fields();if(!n[0])return;e.setValue(n[0],t)}else e.setValue(this.transformFormData(t,".","-"))},addRule:function(e){if(e&&this.dragKeyList.length+1>this.max)return s["Message"].warning("最多只能添加".concat(this.max,"个"));var t=this.copyRule(),n="ruleKey_".concat(++this.len);this.$set(this.cacheRule,n,t),this.dragKeyList.push(n)},add$f:function(e,t,n){this.group$f[t]=n,this.setValue(n,this.value[e]),this.updateData(),this.$nextTick((function(){n.clearValidateState()}))},deleteRow:function(e){if(this.dragKeyList.length-1<this.min)return s["Message"].warning("最少要保留".concat(this.min,"个"));this.removeRule(e)},removeRule:function(e){this.$delete(this.cacheRule,e),delete this.group$f[e],this._.remove(this.dragKeyList,(function(t){return t===e})),this.updateData(),this.$emit("remove",this.group$f)},copyRule:function(){return this._.cloneDeep(this.formRule)}}},d=p,f=(n("cdea"),n("2877")),h=Object(f["a"])(d,i,o,!1,null,"23946da2",null);t["default"]=h.exports},e1bf:function(e,t,n){"use strict";n.r(t);var i,o,a=n("2638"),r=n.n(a),s=(n("ac6a"),n("c5f6"),n("b91a")),l=n("71a8"),c={name:"TableForm",props:{rule:{type:Object,default:function(){}},rules:{type:Array,default:function(){return[]}},max:{type:Number,default:0},min:{type:Number,default:0},value:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{cacheRule:[1],tableData:[],cell:void 0,config:{injectEvent:!0,labelWidth:0,submitBtn:!1,resetBtn:!1}}},methods:{getTableHeader:function(){return this.$props.rules},addCell:function(){this.$props.max&&this.tableData.length>=this.$props.max?this.$message({message:"最多允许".concat(this.$props.max,"个子项"),type:"warning"}):(this.tableData.push(Object.assign({},this.cell)),this.onChange())},makeCell:function(){var e={};return this.$props.rules.forEach((function(t){e[t.field]=t.value||void 0})),e},removeCell:function(e){this.$props.min&&this.tableData.length<=this.$props.min?this.$message({message:"至少保留".concat(this.$props.min,"个子项"),type:"warning"}):(this.tableData.splice(e,1),this.onChange())},onChange:function(){this.$emit("input",this.tableData),this.$emit("change",this.tableData)},onCellChange:function(e,t,n,i){console.log(e,t,n,i),this.tableData[i][t]=n,this.onChange()}},render:function(e){var t=this;console.log("TableForm",this.$props),this.tableData=this.$props.value,this.cell=this.makeCell();var n=this.getTableHeader(),i=s["a"].$form();return console.log("TableForm header",n),e("div",[e("ElTable",{attrs:{data:this.tableData,size:"small",border:!0}},[n.map((function(n,o){return console.log("TableForm header_map",n),e("ElTableColumn",r()([{key:o,attrs:{prop:n.field,label:n.title}},{scopedSlots:{default:function(o){var a=Object.assign({},Object(l["a"])(n));return a.on={change:function(e,i){return t.onCellChange(e,n.field,i,o.$index)}},delete a["title"],delete a["col"],console.log("cellRule",a),e(i,{attrs:{rule:[a],option:t.config}})}}}]))})),e("ElTableColumn",r()([{attrs:{label:"操作",width:100}},{scopedSlots:{default:function(n){return e("ElButton",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:!0},on:{click:function(){return t.removeCell(n.$index)}}})}}}]))]),e("ElButton",{attrs:{type:"success",icon:"el-icon-plus",size:"small",circle:!0},on:{click:this.addCell}})])}},u=c,p=n("2877"),d=Object(p["a"])(u,i,o,!1,null,null,null);t["default"]=d.exports},ebda:function(e,t,n){var i={"./RuleCreate/test.js":"cb21","./Select2/test.js":"63df","./VUpload/test.js":"3922","./gcheckbox.js":"6820","./index.js":"6fec","./select_remote.js":"3257","./template.js":"6cba"};function o(e){var t=a(e);return n(t)}function a(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id="ebda"},f089:function(e,t,n){"use strict";n("fe59")},fe59:function(e,t,n){}}]);